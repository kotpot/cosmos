# 房间功能

如果要加入一起听歌播放音乐，需要先连接上房间

## 房间连接状态

![No Connect Status](main_room_no_connect.png)

用户登录后，主页将会在右上角显示房间的连接状态。连接状态包括：

- 未连接状态：显示未连接，点击该区域时弹窗提示“未连接到房间，是否进行连接”，点击 Connect 时尝试连接到服务器对应房间。
- 已连接状态：显示已连接，点击该区域时弹窗提示“已连接到房间”，用户此时可点击 Disconnect 断开连接。
- Block 状态：显示被 Block，该状态下用户无法再连接到房间。

未连接状态下，房间模块的显示内容为待连接状态，点击 Connect 按钮，尝试连接到房间。

已连接状态下，房间模块显示房间的可操作内容。

![Main Room Content](main_room.png)

## 聊天功能 & 已连接用户

房间模块可操作内容右侧为聊天区域和已连接用户列表区域。

![Main Room Members Fold](main_room_member_fold.png)

聊天区域显示用户的发送的消息列表。

- 每条消息显示的内容包括：头像、姓名、发送时间、发送内容。
- 消息列表下方为消息输入框和发送按钮，用户被禁止聊天时，输入框和发送按钮不可操作，输入框 hint 提示被禁止聊天。
- 用户可输入字符数限制为 255 以内

已连接用户该区域有收纳与展开状态，默认情况下处于收纳状态。

- 显示区域 Icon、成员头像列表、展开按钮。点击展开按钮显示展开状态。
- 该区域高度固定，当成员较多时，成员头像列表可滑动显示。

## 用户列表展开状态

展开状态下，该区域盖住聊天区域，内容收纳状态的基础上向左侧展开并扩展内容：

- 顶部区域图标：右边增加成员标题与成员数量
- 成员头像列表：扩展为成员信息列表
- 收纳按钮：点击收纳按钮显示展开状态

![Main Room Members Unfold](main_room_member_unfold.png)

成员信息显示头像、名字、身份、成员ID，具有相关权限时展示对应的操作图标。

| 身份   | 显示的图标                                    | 是否可点击 |
|------|------------------------------------------|-------|
| 群主   | 对其他所有成员显示 Admin、Chat、Book、Block 所有状态下的图标 | 可点击   |
| 管理员  | 对其他所有普通成员显示 Chat、Book、Block 所有状态下的图标     | 可点击   |
| 普通成员 | 显示其他成员禁言状态下的 Chat 图标、禁止点歌状态下的 Book 图标    | 不可点击  |

Admin 为管理员设置图标，该图标有两种显示状态：

| 对应成员状态 | 显示的图标   | 点击事件        |
|--------|---------|-------------|
| 非管理员   | 设置管理员图标 | 将该成员设置为管理员  |
| 管理员    | 取消管理员图标 | 取消该成员的管理员身份 |

Chat 为聊天状态图标，该图标有两种状态：

| 对应成员状态 | 显示的图标   | 点击事件       |
|--------|---------|------------|
| 可发言    | 可聊天状态图标 | 禁言该成员      |
| 被禁言    | 被禁言状态图标 | 恢复该成员的聊天功能 |

> 被禁言的成员无法在聊天区域发送消息

Book 为点歌状态图标，该图标有两种状态：

| 对应成员状态 | 显示的图标  | 点击事件       |
|--------|--------|------------|
| 可点歌    | 可点歌图标  | 禁止该成员点歌    |
| 禁止点歌   | 不可点歌图标 | 恢复该成员的点歌功能 |

Block 为踢出成员图标，点击时将该成员踢出房间，该成员连接状态变为 Block，无法再进入到房间

成员信息列表显示该区域高度固定，当成员较多是，成员信息列表可滑动显示。

## 歌曲队列

歌曲队列显示接下来播放的歌曲信息列表，列表头部显示剩余歌曲数量，以及剩余总时长。

![Main Room Songs](main_room_songs.png)

歌曲信息列表显示歌曲封面、歌曲名称、歌手名称、歌曲时长。歌曲列表可滚动查看。

当前用户为管理员时：
- 可长按拖拽对应位置的歌曲，调整歌曲位置，拖拽过程歌曲列表应当可滚动。
- 歌曲信息右边显示移除按钮，点击移除按钮将该歌曲从列表中移除
